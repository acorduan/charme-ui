<div class="table-auto lg:table w-full overflow-x-auto">
    <div class="table-header-group aiq-card aiq-card-shadow">
      <div class="table-row">
        <div *ngFor="let column of columns" 
          class="table-cell text-center align-middle text-primary font-semibold text-xs p-2 border-aiq-slate-40 dark:border-aiq-prussian-50 first:border-l border-r border-y ">{{ column.title }}</div>
      </div>
    </div>
    <div class="table-row-group">
      <div class="table-row" *ngFor="let row of data">
        <ng-container *ngFor="let column of columns">
            <ng-container *ngTemplateOutlet="column.template ? column.template : tableRow; context: {row: row, column: column}"></ng-container>
        </ng-container>
      </div>
    </div>
</div>

<ng-template let-row="row" let-column="column" #tableRow>
    <div class="table-cell aiq-card border-r border-b border-aiq-slate-40 dark:border-aiq-prussian-50 first:border-l px-2 py-1 text-xs" 
        [style]="column.style ?? ''" 
        [class]="column.customClass ?? ''" 
        [ngClass]="{ 'cursor-pointer': column.clickEvent }" 
        (click)="onRowClick(row, column)"
    >
        <ng-container *ngIf="column.pipe" [aiqDynamicDirective]="column.directive">
            <div *ngIf="!column.safeHtml">{{ row | aiqNestedValue: column.key | aiqDynamicPipe: column.pipe.class:column.pipe.args }}</div>
            <div *ngIf="column.safeHtml" [innerHTML]="row | aiqNestedValue: column.key | aiqDynamicPipe: column.pipe.class:column.pipe.args | aiqSafeHtml"></div>
        </ng-container>
        <ng-container *ngIf="!column.pipe" [aiqDynamicDirective]="column.directive">
            <div *ngIf="!column.safeHtml">{{ row | aiqNestedValue: column.key }}</div>
            <div *ngIf="column.safeHtml" [innerHtml]="row | aiqNestedValue: column.key | aiqSafeHtml"></div>
        </ng-container>
    </div>
</ng-template>